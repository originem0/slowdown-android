# SlowDown 应用功能说明书

## 概述

**SlowDown** 是一款注重隐私的数字正念 Android 应用。与传统的"应用锁"不同，SlowDown **不会在你打开应用时拦截你**，而是在你使用一段时间后温柔地提醒你暂停和深呼吸，帮助你在无意识滑动中重新获得觉察。

**核心理念**：不是阻止你开始，而是帮你在沉浸中清醒。

---

## 核心功能

### 1. 四种限制模式

SlowDown 为每个监控应用提供四种限制模式：

| 模式 | 行为描述 |
|------|----------|
| **仅统计** | 只记录使用时间，不显示任何干预弹窗 |
| **温和提醒** | 使用达到阈值时弹出深呼吸界面，倒计时结束后可选择继续使用 |
| **严格限制** | 使用达到每日限额后强制关闭，今日无法继续使用该应用 |
| **完全禁止** | 打开应用即阻止，无法使用 |

### 2. 使用时间追踪

- **实时追踪**：记录每个被监控应用的使用时长
- **每日限额**：可为每个应用设置每日使用上限（1-1440 分钟）
- **阈值警告**：
  - 达到限额 80% 时：显示深呼吸提醒
  - 达到限额 100% 时：根据模式显示不同界面

### 3. 深呼吸干预界面

当触发干预时，显示全屏深呼吸界面：

- **呼吸动画圆**：跟随圆圈扩张收缩进行深呼吸
- **倒计时显示**：可设置 3-30 秒的等待时间
- **自定义提醒语**：在设置中添加你的个人激励语
- **操作按钮**：
  - "继续使用"（倒计时结束后激活）
  - "跳转替代应用"（如已配置）
  - "返回桌面"

### 4. 冷却时间机制

- **全局冷却**：可设置 1-30 分钟的弹窗间隔（默认 5 分钟）
- **应用单独冷却**：每个应用可设置独立的冷却时间
- **智能控制**：冷却期内不会重复显示弹窗，避免过度打扰

### 5. 短视频模式

针对抖音、B站等刷视频应用的特殊处理：

- **主动检查**：每 30 秒主动检测使用状态
- **解决痛点**：刷短视频时屏幕滑动不触发常规事件，需要定时主动检查
- **启用方式**：在应用详情页开启"视频应用模式"

### 6. 替代应用跳转

- 为每个监控应用设置一个替代应用
- 达到限额时，可一键跳转到替代应用（如：刷够了抖音 → 去看微信读书）
- 培养积极的使用习惯

---

## 使用指南

### 1. 首次设置

#### 1.1 必要权限

| 权限 | 作用 | 如何开启 |
|------|------|----------|
| 无障碍服务 | 监听应用切换事件 | 设置 → 辅助功能 → SlowDown |
| 悬浮窗权限 | 显示深呼吸界面 | 设置 → 应用 → SlowDown → 悬浮窗 |
| 使用情况访问 | 读取应用使用时间 | 设置 → 安全 → 使用情况访问 |

#### 1.2 MIUI 用户额外设置

小米手机需要额外配置以确保服务稳定运行：

- 开启"自启动"权限
- 开启"后台弹出界面"权限
- 在电池设置中将 SlowDown 设为"无限制"
- 在最近任务中锁定 SlowDown

### 2. 添加监控应用

1. 点击底部导航"应用"标签
2. 浏览已安装应用列表
3. 点击想要监控的应用
4. 配置限制模式、每日限额、冷却时间等

### 3. 配置应用详情

进入应用详情页可设置：

| 配置项 | 说明 |
|--------|------|
| 限制模式 | 仅统计 / 温和提醒 / 严格限制 / 完全禁止 |
| 每日限额 | 1-1440 分钟（不设置 = 无限制） |
| 冷却时间 | 1-30 分钟（不设置 = 使用全局设置） |
| 视频应用模式 | 开启后每 30 秒主动检查 |
| 替代应用 | 达到限额时推荐跳转的应用 |

### 4. 全局设置

在"设置"页面可配置：

| 设置项 | 范围 | 默认值 |
|--------|------|--------|
| 默认倒计时 | 3-30 秒 | 10 秒 |
| 全局冷却时间 | 1-30 分钟 | 5 分钟 |
| 自定义提醒语 | 多行文本 | 无 |
| 应用语言 | 中文 / English | English |

### 5. 关于页面

在"设置"页面点击"关于"可查看：

- **版本信息**：当前应用版本号
- **开发者联系**：
  - 邮箱：`dev@example.com`
  - GitHub：项目地址
- **反馈渠道**：
  - 功能建议
  - Bug 反馈
- **法律信息**：
  - 隐私政策
  - 服务条款
- **感谢声明**：开源项目致谢

---

## 干预触发逻辑

### 触发时机

SlowDown 采用"过程中觉察"的设计理念：

1. **不是打开时拦截**：你可以正常打开任何应用
2. **使用过程中提醒**：当使用时间达到阈值时才触发
3. **冷却期内不重复**：两次弹窗之间有冷却间隔

### 触发条件

```
使用时间 < 80% 限额     → 不触发
使用时间 ≥ 80% 且 < 100% → 深呼吸提醒（软提醒）
使用时间 ≥ 100%（软模式）→ 已达限额提醒（仍可继续）
使用时间 ≥ 100%（严格模式）→ 强制关闭（无法继续）
```

### 无限制应用

如果应用启用了监控但未设置每日限额：

- 每次进入应用后，按冷却时间间隔触发深呼吸弹窗
- 例如：冷却时间 5 分钟，则每使用 5 分钟弹窗一次

---

## 统计功能

### 今日统计

- 今日总使用时长
- 今日拦截次数
- 节省时间估算
- 觉察率（选择"返回桌面"或"跳转替代应用"的比例）

### 周统计

- 本周每日使用趋势（柱状图）
- 与上周对比

### 应用详情

- 每个应用的使用时长
- 使用进度条（相对于每日限额）

---

## 隐私保护

SlowDown 高度重视用户隐私：

- **本地存储**：所有数据存储在设备本地，不上传云端
- **无网络请求**：应用不包含任何网络功能
- **无账号系统**：不需要注册登录
- **支持系统备份**：可通过 Android 系统备份功能迁移数据

---

## 兼容性

### 支持的 Android 版本

- 最低版本：Android 8.0（API 26）
- 目标版本：Android 14（API 34）

### 特殊设备适配

**MIUI（小米）**
- 需要开启后台弹出界面权限
- 需要设置电池无限制
- 建议在最近任务中锁定应用

**Samsung One UI**
- 需要在电池设置中关闭"暂停后台活动"

---

## 常见问题

### Q1: 为什么刷短视频时没有弹窗？

A: 短视频应用滑动切换视频时不会触发常规事件。请在应用详情页开启"视频应用模式"，系统会每 30 秒主动检查一次。

### Q2: 为什么有时候弹窗不出现？

A: 可能原因：
- 当前在冷却时间内
- 使用时间未达到 80% 阈值
- 无障碍服务被系统关闭（MIUI 常见）

### Q3: 如何彻底禁用某个应用？

A: 在应用详情页选择"完全禁止"模式，打开该应用时会立即显示阻止界面。

### Q4: 弹窗倒计时能调整吗？

A: 可以。在"设置"页面调整"默认倒计时"，范围 3-30 秒。

### Q5: 电话和短信会被拦截吗？

A: 不会。系统应用和关键功能（电话、短信、系统设置等）自动排除，不会被干预。

---

## 技术架构简述

- **服务层**：基于 AccessibilityService 实现应用切换监听
- **追踪层**：通过 UsageStatsManager 获取精确使用时间
- **存储层**：Room 数据库 + DataStore 偏好设置
- **UI 层**：Jetpack Compose + Material 3 设计

详细技术文档请参阅 [architecture.md](./architecture.md)。

---

*本文档基于 v1.1 版本编写，最后更新：2026-01-23*
